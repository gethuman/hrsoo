!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.hrsoo=e()}}(function(){return function e(t,n,r){function o(a,i){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!i&&l)return l(a,!0);if(s)return s(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var p=n[a]={exports:{}};t[a][0].call(p.exports,function(e){var n=t[a][1][e];return o(n?n:e)},p,p.exports,e,t,n,r)}return n[a].exports}for(var s="function"==typeof require&&require,a=0;a<r.length;a++)o(r[a]);return o}({1:[function(e,t,n){var r=e("./hrsoo.parser"),o=e("./hrsoo.formatter");t.exports={parse:r.parse,stringify:o.stringify,format:o.format}},{"./hrsoo.formatter":2,"./hrsoo.parser":4}],2:[function(e,t,n){function r(e){if(e=e||0,0>=e&&(e=0),0===e||2400===e)return"midnight";if(1200===e)return"noon";var t=Math.floor(e/100),n=e-100*t,r=t>11&&24>t?"pm":"am";t>12&&(t-=12);var o=t;return n&&(o+=":"+n),o+r}function o(e,t,n){if(t=t||"est",n=n||"est",!e)return"closed";if(e.allDay)return"all day";for(var o=u[n]-u[t],s=0,a="",i="",l=null;2400>=s;)a=r(s+o),e[s+""]&&!l?l=a:e[s+""]&&2400!==s||!l||(i&&(i+=", "),i+=l+"-"+a,l=null),s+=s%100===0?30:70;return i?i:"closed"}function s(e,t){e=e||{},t=t||{};var n=t.type||"medium";if(e.everyDayAllTime)return"short"===n?"24-7":"24 hours, 7 days";for(var r,s,a,i=e.timezone||"est",u=t.timezone||i,p=l.daysOfWeek,f=l.aliases.days,m="",d=null,y=null,c=null,g=0;7>g;g++){if(r=p[g],s="short"===n?f[r][0]:"medium"===n?f[r][2]:r,s=s.substring(0,1).toUpperCase()+s.substring(1),a=e[r]?o(e[r],i,u):"closed",e.isAllWeekSameTime){m=a;break}d?a!==d&&("closed"!==d&&(m&&(m+=", "),m+=y,c!==y&&(m+="-"+c),m+=" "+d),y=s,d=a):(d=a,y=s),c=s}return d&&"closed"!==d&&(m&&(m+=", "),m+=y,c!==y&&(m+="-"+c),m+=" "+d),m+" "+u.toUpperCase()}function a(e,t){var n=i.parse(e,t);return s(n,t)}var i=e("./hrsoo.parser"),l=e("./hrsoo.utils"),u={est:500,cst:400,mst:300,pst:200};t.exports={getTimeString:r,formatTime:o,stringify:s,format:a}},{"./hrsoo.parser":4,"./hrsoo.utils":5}],3:[function(e,t,n){function r(e){if(!e||!e.text)return e;for(var t,n=e.text.length,r=e.index||0,o="",s=r>0?e.text.charAt(r-1):null;n>r;){if(t=e.text.charAt(r),!i.isIgnore(t)){if(!i.isLetter(t))break;o+=t}r++}if(e.index=r,!o)return e;o=o.toLowerCase(),e.tokens=e.tokens||[];var a=i.lookupAlias("timezones",o),l=i.lookupAlias("days",o),u=i.lookupAlias("operations",o);return i.isAmPm(o,s)?("a"===o&&(o="am"),"p"===o&&(o="pm"),e.tokens.push({type:"ampm",value:o})):a?e.tokens.push({type:"timezone",value:a}):u?e.tokens.push({type:"operation",value:u}):l?e.tokens.push({type:"days",value:[l]}):"closed"===o&&e.tokens.push({type:"time",value:{isClosed:!0}}),e}function o(e){for(var t,n,r,o="0",s=!1,a=0;e.index<e.text.length;){if(t=e.text.charAt(e.index),":"===t||!s&&3>a&&"."===t)s=!0,n=parseInt(o),o="0";else{if(!i.isNumber(t))break;o+=t}a++,e.index++}if(n?r=parseInt(o):(n=parseInt(o),r=0),n>12&&!s&&(n+"").length>2){var l=n;n=Math.floor(l/100),r=l-100*n}return e.tokens=e.tokens||[],e.tokens.push({type:"time",value:{hrs:n,mins:r}}),e}function s(e){e.tokens=e.tokens||[];var t=e.text;return t=t.replace(/eastern standard time/g,"est"),t=t.replace(/eastern time/g,"est"),t=t.replace(/pacific standard time/g,"pst"),t=t.replace(/pacific time/g,"pst"),t=t.replace(/mountain standard time/g,"mst"),t=t.replace(/mountain time/g,"mst"),t=t.replace(/central standard time/g,"cst"),t=t.replace(/central time/g,"cst"),t=t.replace(/midnight/g,"12am"),t=t.replace(/â€“/g,"through"),t=t.replace(/ã¢â‚¬â€œ/g,"through"),t=t.replace(/\//g," "),t=t.replace("7 days a week","7 days"),t=t.replace("seven days a week","7 days"),t.indexOf("24 hours")>-1&&(e.tokens.push({type:"time",value:{allDay:!0}}),t=t.replace("24 hours","")),t.indexOf("7 days")>-1&&(e.tokens.push({type:"days",value:i.daysOfWeek}),t=t.replace("7 days","")),e.text=t,e}function a(e,t){if(!e)return[];var n,a,l={text:e.toLowerCase(),index:0,tokens:[]};for(t&&t.noLog&&(l.noLog=!0),l=s(l);l.index<l.text.length;)n=l.text.charAt(l.index),i.isLetter(n)?l=r(l):i.isNumber(n)?l=o(l):i.isSkip(n)?l.index++:(a=i.lookupAlias("operations",n),a?l.tokens.push({type:"operation",value:a}):i.log("Unexpected character: "+n,l),l.index++);return l.tokens||[]}var i=e("./hrsoo.utils");t.exports={readString:r,readTime:o,checkCommonHours:s,getTokens:a}},{"./hrsoo.utils":5}],4:[function(e,t,n){function r(e){e=e||{},e.tokens=e.tokens||[];var t,n,r;for(t=e.tokens.length-1;t>=0;t--)n=e.tokens[t],"timezone"===n.type&&(r&&n.value!==r?d.log("Multiple timezones found. Using "+r+" and ignoring "+n.value,e):r=n.value,e.tokens.splice(t,1));return e.timezone=r||"est",e}function o(e){e=e||{},e.tokens=e.tokens||[];var t,n,r;for(t=e.tokens.length-1;t>0;t--)if(n=e.tokens[t],r=e.tokens[t-1],"ampm"===n.type){if("operation"===r.type){if(e.tokens.splice(t-1,1),t--,0===t)break;r=e.tokens[t-1]}"time"===r.type?r.ampm=n.value:d.log("Previous token is "+r.type+" "+r.value+" so ignore timezone "+n.value,e),e.tokens.splice(t,1)}return e}function s(e){e=e||{};var t=e.tokens;return 2===t.length&&"time"===t[0].type&&"time"===t[1].type&&t.splice(1,0,{type:"operation",value:"through"}),3===t.length&&"time"===t[0].type&&"operation"===t[1].type&&"through"===t[1].value&&"time"===t[2].type&&t.splice(0,0,{type:"days",value:d.daysOfWeek}),e}function a(e,t,n){var r,o;for(r=e.tokens.length-1;r>=0;r--)o=e.tokens[r],"operation"===o.type&&o.value===t&&(e=n(e,r));return e}function i(e,t){if(1>t||t>e.tokens.length-2)return d.log("Through operation without prev or next",e),e.tokens.splice(t,1),e;var n,r,o,s,a,i=e.tokens[t-1],l=e.tokens[t+1];if(i.type!==l.type||"days"!==i.type&&"time"!==i.type)return e.tokens.splice(t,1),e;if("days"===i.type){if(!i.value.length||!l.value.length)return d.log("No days in prev or next",e),e.tokens.splice(t,1),e;if(r=d.daysOfWeek.indexOf(i.value[0]),o=d.daysOfWeek.indexOf(l.value[0]),0>r||1>o)return d.log("Start or end day does not exist",e),e.tokens.splice(t,1),e;for(i.value=[],n=r;o>=n&&n<d.daysOfWeek.length;n++)i.value.push(d.daysOfWeek[n]);if(r>o)for(n=0;o>=n;n++)i.value.push(d.daysOfWeek[n]);e.tokens.splice(t,2)}else"time"===i.type&&(i.value=i.value||{},l.value=l.value||{},s=100*(i.value.hrs||0)+(i.value.mins||0),a=100*(l.value.hrs||0)+(l.value.mins||0),(l.ampm&&"pm"===l.ampm||!l.ampm&&800>a||1200===a&&"am"===l.ampm)&&(a+=1200),(i.ampm&&"pm"===i.ampm&&1200>s||!i.ampm&&500>s)&&(s+=1200),s===a&&1200>=s&&1200>=a&&(!l.ampm||"pm"!==l.ampm)&&(a+=1200),a>300&&s>=a&&d.log("Start time "+s+" must be before end time "+a,e),i.value={ranges:[{start:s,end:a}]},delete i.ampm,e.tokens.splice(t,2));return e}function l(e){e=e||{};var t=e.tokens||[];if(t.length<2)return e;var n,r,o;for(o=t.length-1;o>0;o--)n=t[o-1],r=t[o],1===o&&n.value.hours&&d.log("Token "+(o-1)+" has hours in compressDayTimes",e),r.value.hours&&d.log("Token "+o+" has hours in compressDayTimes",e),"time"!==n.type||n.value.isClosed||"time"!==r.type||r.value.isClosed?"days"===n.type&&"days"===r.type&&(n.value=n.value.concat(r.value),t.splice(o,1)):(n.value.ranges=n.value.ranges||[],n.value.ranges=n.value.ranges.concat(r.value.ranges||[]),r.value.allDay&&(n.value.allDay=!0),t.splice(o,1));return e}function u(e){e=e||[];var t,n,r,o,s={};for(t=0;t<e.length;t++)for(n=e[t],r=n.start;r<n.end;)o=r+"",s[o]=!0,r+="00"===o.substring(o.length-2)?30:70;return s}function p(e){for(var t,n,r,o,s,a,i={},l=e.tokens||[],p=l.length-1,f=0,m=!0,y=!0,c=null;p>f;){t=e.tokens[f],n=e.tokens[f+1],"time"!==t.type&&"days"!==n.type&&(t=e.tokens[f+1],n=e.tokens[f]);var g=JSON.stringify(t);if(c?c!==g&&(y=!1):c=g,"time"===t.type||"days"===n.type){for(r=u(t.value.ranges),o=0;o<n.value.length;o++)if(s=n.value[o],i[s]=i[s]||{},t.value.allDay)i[s].allDay=!0;else{m=!1;for(a in r)r.hasOwnProperty(a)&&(i[s][a]=!0)}f+=2}else d.log("Tokens "+f+" and "+(f+1)+" not time - days pair",e),f++}var h=7===Object.keys(i).length;return h&&m?{everyDayAllTime:!0}:(i.isAllWeekSameTime=h&&y,i.timezone=e.timezone||"est",i)}function f(e,t){var n={};return t&&t.noLog&&(n.noLog=!0),t&&t.logHandler&&(n.logHandler=t.logHandler),n.tokens=m.getTokens(e,t),n=r(n),n=o(n),n=s(n),n=a(n,"through",i),n=l(n),p(n)}var m=e("./hrsoo.lexer"),d=e("./hrsoo.utils");t.exports={throughOp:i,parseTimezone:r,parseAmPm:o,timeAllWeek:s,doOperations:a,compressDayTimes:l,getTimeProfile:u,getDayTimes:p,parse:f}},{"./hrsoo.lexer":3,"./hrsoo.utils":5}],5:[function(e,t,n){function r(e){return(e>="a"&&"z">=e||e>="A"&&"Z">=e)&&"string"==typeof e}function o(e){return e>="0"&&"9">=e&&"string"==typeof e}function s(e){return p.indexOf(e)>-1||f.indexOf(e)>-1}function a(e){return f.indexOf(e)>-1}function i(e,t){return"am"===e||"pm"===e||t&&!isNaN(t)&&("a"===e||"p"===e)}function l(e,t){var n,r,o,s,a=d[e]||{},i=Object.keys(a);for(n=0;n<i.length;n++){if(o=i[n],o===t)return o;for(s=a[o],r=0;r<s.length;r++)if(s[r]===t)return o}return null}function u(e,t){t=t||{},t.logHandler?t.logHandler(e+" || state = "+JSON.stringify(t)):t.noLog||console.log(e+" || state = "+JSON.stringify(t))}var p=[" ","\r","	","\n",""," "],f=[".","(",")",",","and",":","all","times","&","#",";","|"],m=["monday","tuesday","wednesday","thursday","friday","saturday","sunday"],d={operations:{through:["-","~","to","thru"]},timezones:{est:["et","eastern"],cst:["ct","central"],mst:["mt","mountain"],pst:["pt","pacific"]},days:{monday:["m","mo","mon","mom"],tuesday:["t","tu","tue","tues"],wednesday:["w","we","wed"],thursday:["t","th","thu","thur","thurs"],friday:["f","fr","fri"],saturday:["s","sa","sat"],sunday:["s","su","sun"]}};t.exports={daysOfWeek:m,aliases:d,isLetter:r,isNumber:o,isSkip:s,isIgnore:a,isAmPm:i,lookupAlias:l,log:u}},{}]},{},[1])(1)});
//# sourceMappingURL=hrsoo.min.js.map